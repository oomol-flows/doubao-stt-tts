# 豆包语音识别与合成

这是一个功能完整的 OOMOL 语音处理包,提供基于豆包 AI 服务的语音转文字(STT)和文字转语音(TTS)功能。该包提供了易于使用的功能块,可以将音频转换为文字,或将文字转换为自然流畅的语音,支持多种语言和音色选择。

[English Documentation](./README.md)

## 功能特性

- **语音转文字(STT)**:将音频文件或 URL 转换为文字,包含词级时间戳
- **文字转语音(TTS)**:从文字生成自然流畅的语音,提供 21 种音色选择
- **多种输入格式**:支持本地文件和远程 URL
- **灵活的输出方式**:可获取 URL 链接或直接下载到本地文件
- **丰富的音色选择**:21 种中英文音色可供选择

## 可用功能块

### 子流程(即用型工作流)

#### 1. File Doubao STT(本地文件语音识别)
将本地音频文件转换为文字。

**输入参数:**
- `file`: 本地音频文件路径(支持 mp3、wav、m4a 等格式)
- `format`: 音频格式(默认:mp3)

**输出结果:**
- `text`: 完整转写文字
- `words`: 词级转写结果及时间戳

**应用场景:**适合处理本地存储的音频文件,如录音、播客或语音备忘录。

#### 2. URL Doubao STT(URL 语音识别)
从 URL 地址获取音频并转换为文字。

**输入参数:**
- `audio_url`: 待转写的音频文件 URL
- `format`: 音频格式(默认:mp3)

**输出结果:**
- `text`: 完整转写文字
- `words`: 词级转写结果及时间戳

**应用场景:**适合处理在线托管的音频文件,无需先下载到本地。

#### 3. Doubao TTS to URL(文字转语音 - 返回 URL)
将文字转换为语音并获取音频 URL。

**输入参数:**
- `text`: 待转换的文字内容
- `voice`: 音色选择(提供 21 种中英文音色)

**输出结果:**
- `audio_url`: 生成的音频文件 URL

**应用场景:**为 Web 应用、聊天机器人或任何需要音频 URL 的场景生成语音。

#### 4. Doubao TTS to File(文字转语音 - 下载文件)
将文字转换为语音并下载到本地文件。

**输入参数:**
- `text`: 待转换的文字内容
- `voice`: 音色选择(提供 21 种音色)

**输出结果:**
- (音频文件下载到本地)

**应用场景:**为离线使用、本地播放或进一步处理生成音频文件。

## 音色选项

TTS 服务支持 21 种不同的中英文音色:

### 中文音色
- 冷酷哥哥
- 甜心小美
- 高冷御姐
- 傲娇霸总
- 广州德哥
- 京腔侃爷
- 邻居阿姨
- 优柔公子
- 儒雅男友
- 俊朗男友
- 北京小爷
- 柔美女友
- 阳光青年
- 魅力女友
- 深夜播客

### 英文音色
- Candice(美式英语,女声)
- Serena(美式英语,女声)
- Glen(美式英语,男声)
- Sylus(美式英语,男声)
- Corey(英式英语,男声)
- Nadia(英式英语,女声)

## 使用示例

### 示例 1:转写本地音频文件

1. 将 **File Doubao STT** 功能块添加到工作流
2. 使用文件选择器选择音频文件
3. 设置格式(如 "mp3")
4. 运行工作流
5. 在输出中获取转写文字和词级时间戳

### 示例 2:文字转语音

1. 将 **Doubao TTS to URL** 功能块添加到工作流
2. 输入要转换的文字内容
3. 从下拉菜单中选择音色
4. 运行工作流
5. 在输出中获取音频 URL

### 示例 3:音频翻译流程

结合 STT 和 TTS 功能块创建音频翻译工作流:
1. 使用 **URL Doubao STT** 将音频转写为文字
2. 添加翻译功能块(来自其他包)
3. 使用 **Doubao TTS to File** 生成翻译后的音频

## 技术详情

### 任务块

该包包含四个核心任务块,为子流程提供支持:

1. **Submit Doubao STT**:提交音频进行转写并返回任务 ID
2. **Get Doubao STT Result**:使用任务 ID 获取转写结果
3. **Submit Doubao TTS**:提交文字进行语音合成并返回任务 ID
4. **Get Doubao TTS Result**:使用任务 ID 获取生成的音频

这些任务块采用异步处理模型,具有自动轮询和重试逻辑,确保可靠获取结果。

### 支持的音频格式

- MP3
- WAV
- M4A
- 以及其他常见音频格式

### 依赖项

该包会自动安装所需依赖:
- `upload-to-cloud`: 用于将本地文件上传到云存储
- `downloader`: 用于从 URL 下载音频文件

## 安装方法

该包在 OOMOL 包注册表中可用。通过 OOMOL 包管理器安装:

1. 在包注册表中搜索 "doubao-stt-tts"
2. 点击安装
3. 将其添加到工作空间依赖项
4. 开始在工作流中使用功能块

## 使用要求

- OOMOL 平台
- 有效的豆包 API 访问权限(由 OOMOL 管理)
- 互联网连接用于 API 请求

## 许可证

该包是 OOMOL 生态系统的一部分。

## 技术支持

如有问题、疑问或功能请求,请联系包维护者或访问 OOMOL 社区论坛。
