title: "%url-doubao-stt%"
description: "%transcribe-audio-from-url-to-text-using-doubao-stt-directly-proc%"

nodes:
  - node_id: submit-doubao-stt#1
    task: self::submit-doubao-stt
    inputs_from:
      - handle: audio_url
        from_flow:
          - input_handle: audio_url
        from_node:
          []
      - handle: format
        value: "mp3"
        from_flow:
          - input_handle: format

  - node_id: get-doubao-stt-result#1
    task: self::get-doubao-stt-result
    inputs_from:
      - handle: task_id
        from_node:
          - node_id: submit-doubao-stt#1
            output_handle: task_id
      - handle: max_retries
        value: 60
      - handle: poll_interval
        value: 2
inputs_def:
  - handle: audio_url
    description: "%url-of-the-audio-file-to-transcribe2%"
    json_schema:
      type: string
    nullable: false
    executor_name: python
  - handle: format
    description: "%audio-format-e-g-mp3-wav-m4a2%"
    json_schema:
      type: string
    value: mp3
    nullable: false
    executor_name: python
outputs_def:
  - handle: text
    json_schema:
      type: string
    nullable: false
    description: "%transcribed-text-from-the-audio3%"
    executor_name: python
  - handle: words
    json_schema:
      type: array
    nullable: false
    description: "%word-level-transcription-with-timestamps3%"
    executor_name: python
outputs_from:
  - handle: text
    from_node:
      - node_id: get-doubao-stt-result#1
        output_handle: text
  - handle: words
    from_node:
      - node_id: get-doubao-stt-result#1
        output_handle: words
